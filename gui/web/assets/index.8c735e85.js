const Ae=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}};Ae();function I(){}function Ue(t){return t&&typeof t=="object"&&typeof t.then=="function"}function ke(t){return t()}function fe(){return Object.create(null)}function K(t){t.forEach(ke)}function Le(t){return typeof t=="function"}function ve(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Me(t){return Object.keys(t).length===0}function B(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function b(t){return document.createElement(t)}function v(t){return document.createTextNode(t)}function U(){return v(" ")}function De(){return v("")}function we(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function ge(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Se(t){return function(e){e.isTrusted&&t.call(this,e)}}function X(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Te(t){return Array.from(t.childNodes)}function J(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}let q;function E(t){q=t}function Pe(){if(!q)throw new Error("Function called outside component initialization");return q}const H=[],ae=[],V=[],de=[],Re=Promise.resolve();let oe=!1;function Fe(){oe||(oe=!0,Re.then(se))}function ie(t){V.push(t)}const re=new Set;let Q=0;function se(){const t=q;do{for(;Q<H.length;){const e=H[Q];Q++,E(e),ze(e.$$)}for(E(null),H.length=0,Q=0;ae.length;)ae.pop()();for(let e=0;e<V.length;e+=1){const n=V[e];re.has(n)||(re.add(n),n())}V.length=0}while(H.length);for(;de.length;)de.pop()();oe=!1,re.clear(),E(t)}function ze(t){if(t.fragment!==null){t.update(),K(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ie)}}const W=new Set;let D;function xe(){D={r:0,c:[],p:D}}function Ce(){D.r||K(D.c),D=D.p}function F(t,e){t&&t.i&&(W.delete(t),t.i(e))}function Y(t,e,n,l){if(t&&t.o){if(W.has(t))return;W.add(t),D.c.push(()=>{W.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}}function Be(t,e){const n=e.token={};function l(o,r,u,d){if(e.token!==n)return;e.resolved=d;let c=e.ctx;u!==void 0&&(c=c.slice(),c[u]=d);const s=o&&(e.current=o)(c);let p=!1;e.block&&(e.blocks?e.blocks.forEach((_,y)=>{y!==r&&_&&(xe(),Y(_,1,1,()=>{e.blocks[y]===_&&(e.blocks[y]=null)}),Ce())}):e.block.d(1),s.c(),F(s,1),s.m(e.mount(),e.anchor),p=!0),e.block=s,e.blocks&&(e.blocks[r]=s),p&&se()}if(Ue(t)){const o=Pe();if(t.then(r=>{E(o),l(e.then,1,e.value,r),E(null)},r=>{if(E(o),l(e.catch,2,e.error,r),E(null),!e.hasCatch)throw r}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,t),!0;e.resolved=t}}function He(t,e,n){const l=e.slice(),{resolved:o}=t;t.current===t.then&&(l[t.value]=o),t.current===t.catch&&(l[t.error]=o),t.block.p(l,n)}function Je(t,e){t.d(1),e.delete(t.key)}function qe(t,e){Y(t,1,1,()=>{e.delete(t.key)})}function Ie(t,e,n,l,o,r,u,d,c,s,p,_){let y=t.length,g=r.length,w=y;const O={};for(;w--;)O[t[w].key]=w;const N=[],L=new Map,$=new Map;for(w=g;w--;){const h=_(o,r,w),S=n(h);let k=u.get(S);k?l&&k.p(h,e):(k=s(S,h),k.c()),L.set(S,N[w]=k),S in O&&$.set(S,Math.abs(w-O[S]))}const j=new Set,T=new Set;function A(h){F(h,1),h.m(d,p),u.set(h.key,h),p=h.first,g--}for(;y&&g;){const h=N[g-1],S=t[y-1],k=h.key,M=S.key;h===S?(p=h.first,y--,g--):L.has(M)?!u.has(k)||j.has(k)?A(h):T.has(M)?y--:$.get(k)>$.get(M)?(T.add(k),A(h)):(j.add(M),y--):(c(S,u),y--)}for(;y--;){const h=t[y];L.has(h.key)||c(h,u)}for(;g;)A(N[g-1]);return N}function Ke(t){t&&t.c()}function $e(t,e,n,l){const{fragment:o,on_mount:r,on_destroy:u,after_update:d}=t.$$;o&&o.m(e,n),l||ie(()=>{const c=r.map(ke).filter(Le);u?u.push(...c):K(c),t.$$.on_mount=[]}),d.forEach(ie)}function Ee(t,e){const n=t.$$;n.fragment!==null&&(K(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ye(t,e){t.$$.dirty[0]===-1&&(H.push(t),Fe(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Oe(t,e,n,l,o,r,u,d=[-1]){const c=q;E(t);const s=t.$$={fragment:null,ctx:null,props:r,update:I,not_equal:o,bound:fe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:fe(),dirty:d,skip_bound:!1,root:e.target||c.$$.root};u&&u(s.root);let p=!1;if(s.ctx=n?n(t,e.props||{},(_,y,...g)=>{const w=g.length?g[0]:y;return s.ctx&&o(s.ctx[_],s.ctx[_]=w)&&(!s.skip_bound&&s.bound[_]&&s.bound[_](w),p&&Ye(t,_)),y}):[],s.update(),p=!0,K(s.before_update),s.fragment=l?l(s.ctx):!1,e.target){if(e.hydrate){const _=Te(e.target);s.fragment&&s.fragment.l(_),_.forEach(f)}else s.fragment&&s.fragment.c();e.intro&&F(t.$$.fragment),$e(t,e.target,e.anchor,e.customElement),se()}E(c)}class Ne{$destroy(){Ee(this,1),this.$destroy=I}$on(e,n){const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(e){this.$$set&&!Me(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}async function Ge(t,e){const n=new URL(t);return n.pathname+="api/retrieve",await(await fetch(n.href,{method:"POST",headers:{Accept:"*/*","Content-Type":"application/json",Authorization:je(e)},body:JSON.stringify({from:0,to:-1})})).json()}async function Qe(t,e,n){const l=new URL(t);return l.pathname+="api/delete",await(await fetch(l.href,{method:"POST",headers:{Accept:"*/*","Content-Type":"application/json",Authorization:je(e)},body:JSON.stringify({duid:n})})).json()}function je(t){return`User ${t.username}:${t.token}`}function me(t,e,n){const l=t.slice();return l[8]=e[n],l}function Ve(t){let e;return{c(){e=b("i"),e.textContent="Deleted"},m(n,l){a(n,e,l)},p:I,d(n){n&&f(e)}}}function We(t){let e;return{c(){e=b("i"),e.textContent="Failed to delete"},m(n,l){a(n,e,l)},p:I,d(n){n&&f(e)}}}function Xe(t){let e,n,l,o=t[3].getDay()+"",r,u,d=t[3].getMonth()+"",c,s,p=t[3].getFullYear()+"",_,y,g,w=t[0].metadata.duid+"",O,N,L,$,j,T,A,h,S,k=[],M=new Map,z,Z,ee,P,te,ne,le,ue,x=t[0].metadata.page&&_e(t),C=t[0].metadata.uid&&pe(t),G=Object.keys(t[0].data);const ce=i=>i[8];for(let i=0;i<G.length;i+=1){let m=me(t,G,i),R=ce(m);M.set(R,k[i]=be(R,m))}return{c(){e=b("b"),e.textContent="Metadata:",n=b("br"),l=v(`\r
        Date: `),r=v(o),u=v("/"),c=v(d),s=v("/"),_=v(p),y=b("br"),g=v(`\r
        DUID: `),O=v(w),N=b("br"),L=U(),x&&x.c(),$=U(),C&&C.c(),j=U(),T=b("br"),A=b("b"),A.textContent="Data",h=b("br"),S=U();for(let i=0;i<k.length;i+=1)k[i].c();z=b("br"),Z=b("br"),ee=U(),P=b("button"),P.textContent="Delete entry",te=b("br"),ne=b("br"),X(P,"class","svelte-mn3pi0")},m(i,m){a(i,e,m),a(i,n,m),a(i,l,m),a(i,r,m),a(i,u,m),a(i,c,m),a(i,s,m),a(i,_,m),a(i,y,m),a(i,g,m),a(i,O,m),a(i,N,m),a(i,L,m),x&&x.m(i,m),a(i,$,m),C&&C.m(i,m),a(i,j,m),a(i,T,m),a(i,A,m),a(i,h,m),a(i,S,m);for(let R=0;R<k.length;R+=1)k[R].m(i,m);a(i,z,m),a(i,Z,m),a(i,ee,m),a(i,P,m),a(i,te,m),a(i,ne,m),le||(ue=we(P,"click",Se(ge(t[7])),{once:!0}),le=!0)},p(i,m){m&1&&w!==(w=i[0].metadata.duid+"")&&J(O,w),i[0].metadata.page?x?x.p(i,m):(x=_e(i),x.c(),x.m($.parentNode,$)):x&&(x.d(1),x=null),i[0].metadata.uid?C?C.p(i,m):(C=pe(i),C.c(),C.m(j.parentNode,j)):C&&(C.d(1),C=null),m&1&&(G=Object.keys(i[0].data),k=Ie(k,m,ce,1,i,G,M,z.parentNode,Je,be,z,me))},d(i){i&&f(e),i&&f(n),i&&f(l),i&&f(r),i&&f(u),i&&f(c),i&&f(s),i&&f(_),i&&f(y),i&&f(g),i&&f(O),i&&f(N),i&&f(L),x&&x.d(i),i&&f($),C&&C.d(i),i&&f(j),i&&f(T),i&&f(A),i&&f(h),i&&f(S);for(let m=0;m<k.length;m+=1)k[m].d(i);i&&f(z),i&&f(Z),i&&f(ee),i&&f(P),i&&f(te),i&&f(ne),le=!1,ue()}}}function _e(t){let e,n=encodeURI(t[0].metadata.page)+"",l,o;return{c(){e=v("Page: "),l=v(n),o=b("br")},m(r,u){a(r,e,u),a(r,l,u),a(r,o,u)},p(r,u){u&1&&n!==(n=encodeURI(r[0].metadata.page)+"")&&J(l,n)},d(r){r&&f(e),r&&f(l),r&&f(o)}}}function pe(t){let e,n=encodeURI(t[0].metadata.uid)+"",l,o;return{c(){e=v("Page: "),l=v(n),o=b("br")},m(r,u){a(r,e,u),a(r,l,u),a(r,o,u)},p(r,u){u&1&&n!==(n=encodeURI(r[0].metadata.uid)+"")&&J(l,n)},d(r){r&&f(e),r&&f(l),r&&f(o)}}}function be(t,e){let n,l=e[8]+"",o,r,u=e[0].data[e[8]]+"",d,c;return{key:t,first:null,c(){n=b("i"),o=v(l),r=v(" \u2192 "),d=v(u),c=U(),this.first=n},m(s,p){a(s,n,p),B(n,o),a(s,r,p),a(s,d,p),a(s,c,p)},p(s,p){e=s,p&1&&l!==(l=e[8]+"")&&J(o,l),p&1&&u!==(u=e[0].data[e[8]]+"")&&J(d,u)},d(s){s&&f(n),s&&f(r),s&&f(d),s&&f(c)}}}function Ze(t){let e;function n(r,u){return r[1]?Xe:r[2]?We:Ve}let l=n(t),o=l(t);return{c(){e=b("li"),o.c(),X(e,"class","list-group-item")},m(r,u){a(r,e,u),o.m(e,null)},p(r,[u]){l===(l=n(r))&&o?o.p(r,u):(o.d(1),o=l(r),o&&(o.c(),o.m(e,null)))},i:I,o:I,d(r){r&&f(e),o.d()}}}function et(t,e,n){let{entry:l}=e,{user_data:o}=e,{hostname:r}=e,u=new Date(l.metadata.date),d=!0,c=!1;async function s(){try{await Qe(r,o,l.metadata.duid)}catch{n(2,c=!0)}n(1,d=!1)}const p=()=>s();return t.$$set=_=>{"entry"in _&&n(0,l=_.entry),"user_data"in _&&n(5,o=_.user_data),"hostname"in _&&n(6,r=_.hostname)},[l,d,c,u,s,o,r,p]}class tt extends Ne{constructor(e){super(),Oe(this,e,et,Ze,ve,{entry:0,user_data:5,hostname:6})}}function ye(t,e,n){const l=t.slice();return l[6]=e[n],l}function nt(t){let e;return{c(){e=b("p"),e.textContent="Failed (check console for details)"},m(n,l){a(n,e,l)},p:I,i:I,o:I,d(n){n&&f(e)}}}function lt(t){let e,n=[],l=new Map,o,r=t[5];const u=d=>d[6].metadata.duid;for(let d=0;d<r.length;d+=1){let c=ye(t,r,d),s=u(c);l.set(s,n[d]=he(s,c))}return{c(){e=b("ul");for(let d=0;d<n.length;d+=1)n[d].c()},m(d,c){a(d,e,c);for(let s=0;s<n.length;s+=1)n[s].m(e,null);o=!0},p(d,c){c&15&&(r=d[5],xe(),n=Ie(n,c,u,1,d,r,l,e,qe,he,null,ye),Ce())},i(d){if(!o){for(let c=0;c<r.length;c+=1)F(n[c]);o=!0}},o(d){for(let c=0;c<n.length;c+=1)Y(n[c]);o=!1},d(d){d&&f(e);for(let c=0;c<n.length;c+=1)n[c].d()}}}function he(t,e){let n,l,o;return l=new tt({props:{entry:e[6],user_data:{username:e[1],token:e[2]},hostname:e[0]}}),{key:t,first:null,c(){n=De(),Ke(l.$$.fragment),this.first=n},m(r,u){a(r,n,u),$e(l,r,u),o=!0},p(r,u){e=r},i(r){o||(F(l.$$.fragment,r),o=!0)},o(r){Y(l.$$.fragment,r),o=!1},d(r){r&&f(n),Ee(l,r)}}}function rt(t){let e;return{c(){e=b("p"),e.textContent="Loading entries..."},m(n,l){a(n,e,l)},p:I,i:I,o:I,d(n){n&&f(e)}}}function ot(t){let e,n,l,o,r,u,d,c,s={ctx:t,current:null,token:null,hasCatch:!0,pending:rt,then:lt,catch:nt,value:5,error:9,blocks:[,,,]};return Be(t[3],s),{c(){e=b("main"),n=b("h1"),n.textContent="Privalytics frontend",l=U(),o=b("button"),o.textContent="Reset credentials",r=U(),s.block.c(),X(o,"class","svelte-x5y7i2"),X(e,"class","svelte-x5y7i2")},m(p,_){a(p,e,_),B(e,n),B(e,l),B(e,o),B(e,r),s.block.m(e,s.anchor=null),s.mount=()=>e,s.anchor=null,u=!0,d||(c=we(o,"click",Se(ge(t[4])),{once:!0}),d=!0)},p(p,[_]){t=p,He(s,t,_)},i(p){u||(F(s.block),u=!0)},o(p){for(let _=0;_<3;_+=1){const y=s.blocks[_];Y(y)}u=!1},d(p){p&&f(e),s.block.d(),s.token=null,s=null,d=!1,c()}}}function it(){localStorage.removeItem("hostname"),localStorage.removeItem("username"),localStorage.removeItem("token"),alert("The credentials are now removed from local storage")}function st(t){const e=localStorage.getItem("hostname")||prompt("Hostname"),n=localStorage.getItem("username")||prompt("Username"),l=localStorage.getItem("token")||prompt("Token");(e==null||n==null||l==null)&&alert("Invalid credentials");let o=Ge(e,{username:n,token:l});return o.then(()=>{localStorage.setItem("hostname",e),localStorage.setItem("username",n),localStorage.setItem("token",l)}),[e,n,l,o,()=>it()]}class ut extends Ne{constructor(e){super(),Oe(this,e,st,ot,ve,{})}}new ut({target:document.getElementById("app")});
